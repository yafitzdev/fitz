# fitz_ai/engines/graphrag/config/default.yaml
#
# Default configuration for GraphRAG engine.
#
# GraphRAG builds a knowledge graph from documents and uses graph-based
# retrieval for answering questions about entities and relationships.
#
# This default uses:
#   - Cohere for LLM and embeddings (requires COHERE_API_KEY)
#   - NetworkX for in-memory graph storage

graphrag:

  # ===========================================================================
  # LLM Provider
  # ===========================================================================
  # Model tiers (smart/fast) are defined in the plugin YAML.

  llm_provider: cohere

  # ===========================================================================
  # Embedding Provider
  # ===========================================================================

  embedding_provider: cohere

  # ===========================================================================
  # Extraction
  # ===========================================================================

  extraction:
    max_entities_per_chunk: 20
    max_relationships_per_chunk: 30
    entity_types:
      - person
      - organization
      - location
      - event
      - concept
      - technology
      - product
      - date
    relationship_types: []
    include_descriptions: true

  # ===========================================================================
  # Community Detection
  # ===========================================================================
  # Algorithms: "louvain" (fast) or "leiden" (requires leidenalg package)

  community:
    algorithm: louvain
    resolution: 1.0
    min_community_size: 2
    max_hierarchy_levels: 2

  # ===========================================================================
  # Search
  # ===========================================================================
  # Modes: "local" (entity-focused), "global" (community-based), "hybrid"

  search:
    default_mode: local
    local_top_k: 10
    global_top_k: 5
    include_relationships: true
    max_context_tokens: 4000

  # ===========================================================================
  # Storage
  # ===========================================================================
  # Backends: "memory" (default) or "file"

  storage:
    backend: memory
    storage_path: null

  # ===========================================================================
  # Ingestion
  # ===========================================================================
  # Chunker defaults are defined in each plugin.

  ingest:
    ingester:
      plugin_name: local

    chunking:
      default:
        plugin_name: recursive
      by_extension:
        .py:
          plugin_name: python_code
        .md:
          plugin_name: markdown
        .pdf:
          plugin_name: pdf_sections
      warn_on_fallback: true

    collection: default
